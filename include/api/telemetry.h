#ifndef TELEMETRY_H
#define TELEMETRY_H
#include "vospi.h"
#include <stdint.h>

#define LEPTON_WORD(buf, i) buf[i] << 8 | buf[i + 1]
#define LEPTON_DWORD(buf, i) LEPTON_WORD(buf, i + 2) << 16 | LEPTON_WORD(buf,i)
#define LEPTON_QWORD(buf, i) LEPTON_DWORD(buf, i + 4) << 32 | LEPTON_DWORD(buf,i)

/** Telemetry Data Status Bits field **/
// typedef struct {
//   uint8_t ffc_desired;
//   uint8_t ffc_state;
//   uint8_t agc_state;
//   uint8_t reserved_2;
//   uint8_t shutter_lockout;
//   uint8_t reserved_3;
//   uint8_t overtemp_shutdown_imminent;
//   uint16_t reserved_4;
// } telemetry_data_status_bits_t;

/* Telemetry Data Content (see pg. 23 of the Lepton3 LWIR Datasheet) */
/* Only covers Telemetry Row A, as there's nothing interesting in B... */
typedef struct {
  //A Register Values

  // uint16_t revision;
  // uint32_t msec_since_boot;
  // telemetry_data_status_bits_t status_bits;
  // uint64_t software_rev;
  // uint32_t frame_count;
  // uint16_t frame_mean;
  // uint16_t fpa_temp_count;
  // uint16_t fpa_temp_kelvin_100;
  // uint16_t fpa_temp_last_ffc_kelvin_100;
  // uint32_t msec_last_ffc;
  // uint16_t agc_roi_top;
  // uint16_t agc_roi_left;
  // uint16_t agc_roi_bottom;
  // uint16_t agc_roi_right;
  // uint16_t agc_clip_limit_high;
  // uint16_t agc_clip_limit_low;
  // uint32_t video_output_format;

  //B Register Values
  // uint16_t background_temp;

  //C Register Values
  // uint16_t tlinear_resolution;
  // uint16_t spotmeter_mean_temp;
  // uint16_t spotmeter_max_temp;
  // uint16_t spotmeter_min_temp;
  // uint16_t spotmeter_population;
  // uint16_t spotmeter_start_row;
  // uint16_t spotmeter_start_col;
  // uint16_t spotmeter_end_row;
  // uint16_t spotmeter_end_col;


 uint16_t variable0;
uint16_t variable1;
uint16_t variable2;
uint16_t variable3;
uint16_t variable4;
uint16_t variable5;
uint16_t variable6;
uint16_t variable7;
uint16_t variable8;
uint16_t variable9;
uint16_t variable10;
uint16_t variable11;
uint16_t variable12;
uint16_t variable13;
uint16_t variable14;
uint16_t variable15;
uint16_t variable16;
uint16_t variable17;
uint16_t variable18;
uint16_t variable19;
uint16_t variable20;
uint16_t variable21;
uint16_t variable22;
uint16_t variable23;
uint16_t variable24;
uint16_t variable25;
uint16_t variable26;
uint16_t variable27;
uint16_t variable28;
uint16_t variable29;
uint16_t variable30;
uint16_t variable31;
uint16_t variable32;
uint16_t variable33;
uint16_t variable34;
uint16_t variable35;
uint16_t variable36;
uint16_t variable37;
uint16_t variable38;
uint16_t variable39;
uint16_t variable40;
uint16_t variable41;
uint16_t variable42;
uint16_t variable43;
uint16_t variable44;
uint16_t variable45;
uint16_t variable46;
uint16_t variable47;
uint16_t variable48;
uint16_t variable49;
uint16_t variable50;
uint16_t variable51;
uint16_t variable52;
uint16_t variable53;
uint16_t variable54;
uint16_t variable55;
uint16_t variable56;
uint16_t variable57;
uint16_t variable58;
uint16_t variable59;
uint16_t variable60;
uint16_t variable61;
uint16_t variable62;
uint16_t variable63;
uint16_t variable64;
uint16_t variable65;
uint16_t variable66;
uint16_t variable67;
uint16_t variable68;
uint16_t variable69;
uint16_t variable70;
uint16_t variable71;
uint16_t variable72;
uint16_t variable73;
uint16_t variable74;
uint16_t variable75;
uint16_t variable76;
uint16_t variable77;
uint16_t variable78;
uint16_t variable79;
uint16_t variable80;
uint16_t variable81;
uint16_t variable82;
uint16_t variable83;
uint16_t variable84;
uint16_t variable85;
uint16_t variable86;
uint16_t variable87;
uint16_t variable88;
uint16_t variable89;
uint16_t variable90;
uint16_t variable91;
uint16_t variable92;
uint16_t variable93;
uint16_t variable94;
uint16_t variable95;
uint16_t variable96;
uint16_t variable97;
uint16_t variable98;
uint16_t variable99;
uint16_t variable100;
uint16_t variable101;
uint16_t variable102;
uint16_t variable103;
uint16_t variable104;
uint16_t variable105;
uint16_t variable106;
uint16_t variable107;
uint16_t variable108;
uint16_t variable109;
uint16_t variable110;
uint16_t variable111;
uint16_t variable112;
uint16_t variable113;
uint16_t variable114;
uint16_t variable115;
uint16_t variable116;
uint16_t variable117;
uint16_t variable118;
uint16_t variable119;
uint16_t variable120;
uint16_t variable121;
uint16_t variable122;
uint16_t variable123;
uint16_t variable124;
uint16_t variable125;
uint16_t variable126;
uint16_t variable127;
uint16_t variable128;
uint16_t variable129;
uint16_t variable130;
uint16_t variable131;
uint16_t variable132;
uint16_t variable133;
uint16_t variable134;
uint16_t variable135;
uint16_t variable136;
uint16_t variable137;
uint16_t variable138;
uint16_t variable139;
uint16_t variable140;
uint16_t variable141;
uint16_t variable142;
uint16_t variable143;
uint16_t variable144;
uint16_t variable145;
uint16_t variable146;
uint16_t variable147;
uint16_t variable148;
uint16_t variable149;
uint16_t variable150;
uint16_t variable151;
uint16_t variable152;
uint16_t variable153;
uint16_t variable154;
uint16_t variable155;
uint16_t variable156;
uint16_t variable157;
uint16_t variable158;
uint16_t variable159;
uint16_t variable160;
uint16_t variable161;
uint16_t variable162;
uint16_t variable163;
uint16_t variable164;
uint16_t variable165;
uint16_t variable166;
uint16_t variable167;
uint16_t variable168;
uint16_t variable169;
uint16_t variable170;
uint16_t variable171;
uint16_t variable172;
uint16_t variable173;
uint16_t variable174;
uint16_t variable175;
uint16_t variable176;
uint16_t variable177;
uint16_t variable178;
uint16_t variable179;
uint16_t variable180;
uint16_t variable181;
uint16_t variable182;
uint16_t variable183;
uint16_t variable184;
uint16_t variable185;
uint16_t variable186;
uint16_t variable187;
uint16_t variable188;
uint16_t variable189;
uint16_t variable190;
uint16_t variable191;
uint16_t variable192;
uint16_t variable193;
uint16_t variable194;
uint16_t variable195;
uint16_t variable196;
uint16_t variable197;
uint16_t variable198;
uint16_t variable199;
uint16_t variable200;
uint16_t variable201;
uint16_t variable202;
uint16_t variable203;
uint16_t variable204;
uint16_t variable205;
uint16_t variable206;
uint16_t variable207;
uint16_t variable208;
uint16_t variable209;
uint16_t variable210;
uint16_t variable211;
uint16_t variable212;
uint16_t variable213;
uint16_t variable214;
uint16_t variable215;
uint16_t variable216;
uint16_t variable217;
uint16_t variable218;
uint16_t variable219;
uint16_t variable220;
uint16_t variable221;
uint16_t variable222;
uint16_t variable223;
uint16_t variable224;
uint16_t variable225;
uint16_t variable226;
uint16_t variable227;
uint16_t variable228;
uint16_t variable229;
uint16_t variable230;
uint16_t variable231;
uint16_t variable232;
uint16_t variable233;
uint16_t variable234;
uint16_t variable235;
uint16_t variable236;
uint16_t variable237;
uint16_t variable238;
uint16_t variable239;
uint16_t variable240;
uint16_t variable241;
uint16_t variable242;
uint16_t variable243;
uint16_t variable244;
uint16_t variable245;
uint16_t variable246;
uint16_t variable247;
uint16_t variable248;
uint16_t variable249;
uint16_t variable250;
uint16_t variable251;
uint16_t variable252;
uint16_t variable253;
uint16_t variable254;
uint16_t variable255;
uint16_t variable256;
uint16_t variable257;
uint16_t variable258;
uint16_t variable259;
uint16_t variable260;
uint16_t variable261;
uint16_t variable262;
uint16_t variable263;
uint16_t variable264;
uint16_t variable265;
uint16_t variable266;
uint16_t variable267;
uint16_t variable268;
uint16_t variable269;
uint16_t variable270;
uint16_t variable271;
uint16_t variable272;
uint16_t variable273;
uint16_t variable274;
uint16_t variable275;
uint16_t variable276;
uint16_t variable277;
uint16_t variable278;
uint16_t variable279;
uint16_t variable280;
uint16_t variable281;
uint16_t variable282;
uint16_t variable283;
uint16_t variable284;
uint16_t variable285;
uint16_t variable286;
uint16_t variable287;
uint16_t variable288;
uint16_t variable289;
uint16_t variable290;
uint16_t variable291;
uint16_t variable292;
uint16_t variable293;
uint16_t variable294;
uint16_t variable295;
uint16_t variable296;
uint16_t variable297;
uint16_t variable298;
uint16_t variable299;
uint16_t variable300;
uint16_t variable301;
uint16_t variable302;
uint16_t variable303;
uint16_t variable304;
uint16_t variable305;
uint16_t variable306;
uint16_t variable307;
uint16_t variable308;
uint16_t variable309;
uint16_t variable310;
uint16_t variable311;
uint16_t variable312;
uint16_t variable313;
uint16_t variable314;
uint16_t variable315;
uint16_t variable316;
uint16_t variable317;
uint16_t variable318;
uint16_t variable319;
uint16_t variable320;
uint16_t variable321;
uint16_t variable322;
uint16_t variable323;
uint16_t variable324;
uint16_t variable325;
uint16_t variable326;
uint16_t variable327;
uint16_t variable328;
uint16_t variable329;
uint16_t variable330;
uint16_t variable331;
uint16_t variable332;
uint16_t variable333;
uint16_t variable334;
uint16_t variable335;
uint16_t variable336;
uint16_t variable337;
uint16_t variable338;
uint16_t variable339;
uint16_t variable340;
uint16_t variable341;
uint16_t variable342;
uint16_t variable343;
uint16_t variable344;
uint16_t variable345;
uint16_t variable346;
uint16_t variable347;
uint16_t variable348;
uint16_t variable349;
uint16_t variable350;
uint16_t variable351;
uint16_t variable352;
uint16_t variable353;
uint16_t variable354;
uint16_t variable355;
uint16_t variable356;
uint16_t variable357;
uint16_t variable358;
uint16_t variable359;
uint16_t variable360;
uint16_t variable361;
uint16_t variable362;
uint16_t variable363;
uint16_t variable364;
uint16_t variable365;
uint16_t variable366;
uint16_t variable367;
uint16_t variable368;
uint16_t variable369;
uint16_t variable370;
uint16_t variable371;
uint16_t variable372;
uint16_t variable373;
uint16_t variable374;
uint16_t variable375;
uint16_t variable376;
uint16_t variable377;
uint16_t variable378;
uint16_t variable379;
uint16_t variable380;
uint16_t variable381;
uint16_t variable382;
uint16_t variable383;
uint16_t variable384;
uint16_t variable385;
uint16_t variable386;
uint16_t variable387;
uint16_t variable388;
uint16_t variable389;
uint16_t variable390;
uint16_t variable391;
uint16_t variable392;
uint16_t variable393;
uint16_t variable394;
uint16_t variable395;
uint16_t variable396;
uint16_t variable397;
uint16_t variable398;
uint16_t variable399;
} telemetry_data_t;

telemetry_data_t parse_telemetry_packet(vospi_packet_t* packet);

#endif
